<Window x:Class="SistemaGestionProyectos2.Views.LoadingWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Cargando..."
        Height="300"
        Width="500"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ShowInTaskbar="False"
        Topmost="True">

    <Border Background="White" 
            CornerRadius="15">
        <Border.Effect>
            <DropShadowEffect BlurRadius="30" 
                            Direction="270" 
                            Color="#000000" 
                            Opacity="0.3" 
                            ShadowDepth="10"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Logo IMA -->
            <Border Grid.Row="1" 
                   Width="200" 
                   Height="60"
                   Margin="0,0,0,20">
                <Grid>
                    <Rectangle Fill="Black" Width="200" Height="2" VerticalAlignment="Top"/>
                    <Rectangle Fill="Black" Width="2" Height="60" HorizontalAlignment="Left"/>
                    <Rectangle Fill="Black" Width="2" Height="60" HorizontalAlignment="Right"/>

                    <StackPanel Orientation="Horizontal" 
                               HorizontalAlignment="Center" 
                               VerticalAlignment="Center">
                        <TextBlock Text="I M A" 
                                 FontSize="32" 
                                 FontWeight="Bold"
                                 Foreground="Black"
                                 FontFamily="Arial Black"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Animación de carga -->
            <Grid Grid.Row="2" Height="60">
                <Canvas Width="100" Height="60">
                    <!-- Círculos animados -->
                    <Ellipse x:Name="Circle1" 
                           Width="12" Height="12" 
                           Fill="#2196F3"
                           Canvas.Left="20"
                           Canvas.Top="24">
                        <Ellipse.RenderTransform>
                            <ScaleTransform x:Name="Scale1" ScaleX="1" ScaleY="1" CenterX="6" CenterY="6"/>
                        </Ellipse.RenderTransform>
                    </Ellipse>

                    <Ellipse x:Name="Circle2" 
                           Width="12" Height="12" 
                           Fill="#2196F3"
                           Canvas.Left="44"
                           Canvas.Top="24">
                        <Ellipse.RenderTransform>
                            <ScaleTransform x:Name="Scale2" ScaleX="1" ScaleY="1" CenterX="6" CenterY="6"/>
                        </Ellipse.RenderTransform>
                    </Ellipse>

                    <Ellipse x:Name="Circle3" 
                           Width="12" Height="12" 
                           Fill="#2196F3"
                           Canvas.Left="68"
                           Canvas.Top="24">
                        <Ellipse.RenderTransform>
                            <ScaleTransform x:Name="Scale3" ScaleX="1" ScaleY="1" CenterX="6" CenterY="6"/>
                        </Ellipse.RenderTransform>
                    </Ellipse>
                </Canvas>

                <!-- Barra de progreso opcional -->
                <ProgressBar x:Name="LoadingProgress"
                           Width="300"
                           Height="4"
                           Margin="0,40,0,0"
                           Visibility="Collapsed">
                    <ProgressBar.Foreground>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Color="#2196F3" Offset="0"/>
                            <GradientStop Color="#1976D2" Offset="1"/>
                        </LinearGradientBrush>
                    </ProgressBar.Foreground>
                </ProgressBar>
            </Grid>

            <!-- Texto de estado -->
            <StackPanel Grid.Row="3" Margin="0,20,0,0">
                <TextBlock x:Name="LoadingTitle"
                         Text="Iniciando Sistema"
                         FontSize="16"
                         FontWeight="SemiBold"
                         HorizontalAlignment="Center"
                         Foreground="#333"
                         Margin="0,0,0,5"/>

                <TextBlock x:Name="LoadingMessage"
                         Text="Conectando con el servidor..."
                         FontSize="12"
                         HorizontalAlignment="Center"
                         Foreground="#666"/>

                <TextBlock x:Name="LoadingDetails"
                         Text=""
                         FontSize="10"
                         FontStyle="Italic"
                         HorizontalAlignment="Center"
                         Foreground="#999"
                         Margin="0,5,0,0"
                         Visibility="Collapsed"/>
            </StackPanel>
        </Grid>
    </Border>

    <Window.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard>
                <Storyboard RepeatBehavior="Forever">
                    <!-- Animación círculo 1 -->
                    <DoubleAnimation Storyboard.TargetName="Scale1"
                                   Storyboard.TargetProperty="ScaleX"
                                   From="1" To="1.5" Duration="0:0:0.6"
                                   AutoReverse="True"/>
                    <DoubleAnimation Storyboard.TargetName="Scale1"
                                   Storyboard.TargetProperty="ScaleY"
                                   From="1" To="1.5" Duration="0:0:0.6"
                                   AutoReverse="True"/>
                    <DoubleAnimation Storyboard.TargetName="Circle1"
                                   Storyboard.TargetProperty="Opacity"
                                   From="1" To="0.3" Duration="0:0:0.6"
                                   AutoReverse="True"/>

                    <!-- Animación círculo 2 con delay -->
                    <DoubleAnimation Storyboard.TargetName="Scale2"
                                   Storyboard.TargetProperty="ScaleX"
                                   From="1" To="1.5" Duration="0:0:0.6"
                                   BeginTime="0:0:0.2"
                                   AutoReverse="True"/>
                    <DoubleAnimation Storyboard.TargetName="Scale2"
                                   Storyboard.TargetProperty="ScaleY"
                                   From="1" To="1.5" Duration="0:0:0.6"
                                   BeginTime="0:0:0.2"
                                   AutoReverse="True"/>
                    <DoubleAnimation Storyboard.TargetName="Circle2"
                                   Storyboard.TargetProperty="Opacity"
                                   From="1" To="0.3" Duration="0:0:0.6"
                                   BeginTime="0:0:0.2"
                                   AutoReverse="True"/>

                    <!-- Animación círculo 3 con más delay -->
                    <DoubleAnimation Storyboard.TargetName="Scale3"
                                   Storyboard.TargetProperty="ScaleX"
                                   From="1" To="1.5" Duration="0:0:0.6"
                                   BeginTime="0:0:0.4"
                                   AutoReverse="True"/>
                    <DoubleAnimation Storyboard.TargetName="Scale3"
                                   Storyboard.TargetProperty="ScaleY"
                                   From="1" To="1.5" Duration="0:0:0.6"
                                   BeginTime="0:0:0.4"
                                   AutoReverse="True"/>
                    <DoubleAnimation Storyboard.TargetName="Circle3"
                                   Storyboard.TargetProperty="Opacity"
                                   From="1" To="0.3" Duration="0:0:0.6"
                                   BeginTime="0:0:0.4"
                                   AutoReverse="True"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Window.Triggers>
</Window>
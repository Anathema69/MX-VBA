<Window x:Class="SistemaGestionProyectos2.Views.PayrollManagementView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:System="clr-namespace:System;assembly=mscorlib"
        Title="Nómina y Gastos Fijos - Sistema de Gestión" 
        Height="850" 
        Width="1400"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        WindowStyle="None"
        ResizeMode="NoResize">

    <Window.Resources>
        <!-- Colores consistentes con el sistema -->
        <SolidColorBrush x:Key="PrimaryColor" Color="#5B3FF9"/>
        <SolidColorBrush x:Key="SuccessColor" Color="#48BB78"/>
        <SolidColorBrush x:Key="DangerColor" Color="#EF4444"/>
        <SolidColorBrush x:Key="WarningColor" Color="#F59E0B"/>
        <SolidColorBrush x:Key="InfoColor" Color="#3B82F6"/>
        <SolidColorBrush x:Key="BackgroundGray" Color="#F7FAFC"/>
        <SolidColorBrush x:Key="BorderGray" Color="#E2E8F0"/>
        <SolidColorBrush x:Key="TextGray" Color="#718096"/>
        <SolidColorBrush x:Key="DarkText" Color="#2D3748"/>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>

        <!-- Estilo para botones modernos -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryColor}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value="0.9"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Opacity" Value="0.8"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Estilo para TabItem -->
        <Style x:Key="ModernTabItem" TargetType="TabItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border Name="Border" 
                                Background="Transparent" 
                                BorderBrush="Transparent" 
                                BorderThickness="0,0,0,2"
                                Padding="20,10"
                                Margin="0,0,10,0">
                            <ContentPresenter x:Name="ContentSite"
                                            VerticalAlignment="Center"
                                            HorizontalAlignment="Center"
                                            ContentSource="Header"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="BorderBrush" 
                                        Value="{StaticResource PrimaryColor}"/>
                                <Setter Property="Foreground" 
                                        Value="{StaticResource PrimaryColor}"/>
                                <Setter Property="FontWeight" Value="SemiBold"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" 
                                        Value="{StaticResource PrimaryColor}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Estilo para celdas del DataGrid -->
        <Style x:Key="ModernDataGridCell" TargetType="DataGridCell">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="8,4"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#E0E7FF"/>
                    <Setter Property="Foreground" Value="{StaticResource DarkText}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid Background="{StaticResource BackgroundGray}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Header -->
            <RowDefinition Height="Auto"/>
            <!-- Cards de resumen -->
            <RowDefinition Height="*"/>
            <!-- TabControl -->
            <RowDefinition Height="Auto"/>
            <!-- Footer -->
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="White" BorderBrush="{StaticResource BorderGray}" 
            BorderThickness="0,0,0,1">
            <Grid Margin="30,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Título y info de vigencia -->
                <StackPanel Grid.Column="0" Orientation="Vertical">
                    <TextBlock Text="NÓMINA Y GASTOS FIJOS" 
                         FontSize="24" 
                         FontWeight="Bold" 
                         Foreground="{StaticResource DarkText}"/>
                    <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                        <TextBlock Text="Vigente: " 
                             FontSize="13" 
                             Foreground="{StaticResource TextGray}"/>
                        <TextBlock Name="CurrentMonthText" 
                             Text="Diciembre 2024" 
                             FontSize="13" 
                             FontWeight="SemiBold"
                             Foreground="{StaticResource DarkText}"/>
                    </StackPanel>
                </StackPanel>

                <!-- Botones de acción -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <Button Name="BackButton"
                        Click="BackButton_Click"
                        Style="{StaticResource ModernButton}"
                        Background="#37474F"
                        Width="100"
                        Margin="0,0,10,0">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="← " FontSize="16" Margin="0,0,5,0"/>
                            <TextBlock Text="Volver" FontSize="13"/>
                        </StackPanel>
                    </Button>

                    <Button Name="CloseButton"
                        Click="CloseButton_Click"
                        Width="35" Height="35"
                        Background="#EF4444"
                        Style="{StaticResource ModernButton}">
                        <TextBlock Text="✕" FontSize="16" FontWeight="Bold"/>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>


        <!-- Row 1: Cards de resumen -->
        <Grid Grid.Row="1" Margin="30,20,30,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Card Empleados Activos -->
            <Border Grid.Column="0" Background="White" CornerRadius="8" 
                Margin="0,0,10,0" Padding="20">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" Direction="270" 
                                ShadowDepth="2" Opacity="0.1"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="👥" FontSize="24" Margin="0,0,0,10"/>
                    <TextBlock Text="EMPLEADOS ACTIVOS" FontSize="11" 
                         Foreground="{StaticResource TextGray}" 
                         FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <TextBlock Name="ActiveEmployeesText" Text="6" 
                         FontSize="28" FontWeight="Bold" 
                         Foreground="{StaticResource DarkText}"/>
                </StackPanel>
            </Border>

            <!-- Card Nómina Mensual -->
            <Border Grid.Column="1" Background="White" CornerRadius="8" 
                Margin="5,0,5,0" Padding="20">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" Direction="270" 
                                ShadowDepth="2" Opacity="0.1"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="💰" FontSize="24" Margin="0,0,0,10"/>
                    <TextBlock Text="NÓMINA MENSUAL" FontSize="11" 
                         Foreground="{StaticResource TextGray}" 
                         FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <TextBlock Name="TotalPayrollText" Text="$0.00" 
                         FontSize="28" FontWeight="Bold" 
                         Foreground="{StaticResource PrimaryColor}"/>
                </StackPanel>
            </Border>

            <!-- Card Gastos Fijos -->
            <Border Grid.Column="2" Background="White" CornerRadius="8" 
                Margin="10,0,0,0" Padding="20">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" Direction="270" 
                                ShadowDepth="2" Opacity="0.1"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="📊" FontSize="24" Margin="0,0,0,10"/>
                    <TextBlock Text="GASTOS FIJOS" FontSize="11" 
                         Foreground="{StaticResource TextGray}" 
                         FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <TextBlock Name="TotalExpensesCardText" Text="$0.00" 
                         FontSize="28" FontWeight="Bold" 
                         Foreground="{StaticResource DangerColor}"/>
                </StackPanel>
            </Border>
        </Grid>


        <!-- Row 2: TabControl -->
        <TabControl Grid.Row="2" Margin="30,10,30,10" Background="Transparent" BorderThickness="0">
            <TabControl.Resources>
                <Style TargetType="TabItem" BasedOn="{StaticResource ModernTabItem}"/>
            </TabControl.Resources>

            <!-- Tab de Nómina -->
            <TabItem Header="NÓMINA">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Toolbar de Nómina -->
                    <Border Grid.Row="0" Background="White" CornerRadius="8" 
                            Margin="0,10,0,15" Padding="20,15">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- Búsqueda -->
                            <!-- Buscar esta sección en el XAML y reemplazarla -->
                            <Border Grid.Column="0" Background="{StaticResource BackgroundGray}" 
        CornerRadius="6" Width="300" HorizontalAlignment="Left">
                                <Grid>
                                    <TextBox Name="SearchEmployeeBox"
               BorderThickness="0"
               Background="Transparent"
               Padding="35,8,10,8"
               FontSize="13"
               VerticalAlignment="Center"
               IsEnabled="True"
               Focusable="True"/>
                                    <!-- Búsqueda -->
                                    <TextBlock Text="🔍" 
                 Margin="10,0,0,0" 
                 VerticalAlignment="Center"
                 Foreground="{StaticResource TextGray}"
                 IsHitTestVisible="False"/>
                                    <!-- Importante: no debe interferir con clicks -->
                                    <TextBlock Text="Buscar empleado..." 
                 Margin="35,0,0,0"
                 VerticalAlignment="Center"
                 Foreground="{StaticResource TextGray}"
                 IsHitTestVisible="False"> <!-- Importante: no debe interferir -->
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Visibility" Value="Hidden"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Text.Length, ElementName=SearchEmployeeBox}" Value="0">
                                                        <Setter Property="Visibility" Value="Visible"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Grid>
                            </Border>

                            <!-- Botones de acción -->
                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                <Button Name="AddEmployeeButton"
                                        Click="AddEmployeeButton_Click"
                                        Style="{StaticResource ModernButton}"
                                        Margin="0,0,10,0">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="➕ " FontSize="12" Margin="0,0,5,0"/>
                                        <TextBlock Text="Nuevo Empleado"/>
                                    </StackPanel>
                                </Button>

                                <Button Name="ViewHistoryButton"
                                        Click="ViewHistoryButton_Click"
                                        Style="{StaticResource ModernButton}"
                                        Background="{StaticResource InfoColor}"
                                        Margin="0,0,10,0">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="📋 " FontSize="12" Margin="0,0,5,0"/>
                                        <TextBlock Text="Historial"/>
                                    </StackPanel>
                                </Button>

                                
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- DataGrid de Empleados -->
                    <Border Grid.Row="1" Background="White" CornerRadius="8">
                        <DataGrid Name="PayrollDataGrid"
                                AutoGenerateColumns="False"
                                CanUserAddRows="False"
                                CanUserDeleteRows="False"
                                GridLinesVisibility="None"
                                BorderThickness="0"
                                Background="White"
                                RowHeight="45"
                                HeadersVisibility="Column"
                                SelectionMode="Single"
                                CellStyle="{StaticResource ModernDataGridCell}"
                                MouseDoubleClick="PayrollDataGrid_MouseDoubleClick">

                            <DataGrid.ColumnHeaderStyle>
                                <Style TargetType="DataGridColumnHeader">
                                    <Setter Property="Background" Value="{StaticResource BackgroundGray}"/>
                                    <Setter Property="Foreground" Value="{StaticResource TextGray}"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="FontSize" Value="12"/>
                                    <Setter Property="Padding" Value="10,12"/>
                                    <Setter Property="BorderThickness" Value="0,0,0,1"/>
                                    <Setter Property="BorderBrush" Value="{StaticResource BorderGray}"/>
                                </Style>
                            </DataGrid.ColumnHeaderStyle>

                            <DataGrid.Columns>
                                <DataGridTextColumn Header="EMPLEADO" 
                              Binding="{Binding Employee}" 
                              Width="2*">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                            <Setter Property="Foreground" Value="{StaticResource DarkText}"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>

                                <DataGridTextColumn Header="PUESTO" 
                              Binding="{Binding Title}" 
                              Width="2*"/>

                                <DataGridTextColumn Header="RANGO" 
                              Binding="{Binding Range}" 
                              Width="120"/>

                                <DataGridTextColumn Header="CONDICIÓN" 
                              Binding="{Binding Condition}" 
                              Width="120"/>

                                <DataGridTextColumn Header="NÓMINA MENSUAL" 
                              Binding="{Binding MonthlyPayroll, StringFormat={}{0:C}}" 
                              Width="150">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="FontWeight" Value="Bold"/>
                                            <Setter Property="Foreground" Value="{StaticResource DarkText}"/>
                                            <Setter Property="TextAlignment" Value="Right"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>

                                <DataGridTemplateColumn Header="ACCIONES" Width="120">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Name="EditButton"
                                    Click="EditEmployee_Click"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    Padding="5"
                                    ToolTip="Editar">
                                                    <TextBlock Text="✏️" FontSize="16"/>
                                                </Button>
                                                <Button Name="HistoryButton"
                                    Click="ViewEmployeeHistory_Click"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    Padding="5"
                                    ToolTip="Ver historial">
                                                    <TextBlock Text="📊" FontSize="16"/>
                                                </Button>
                                                <Button Name="DeactivateButton"
                                    Click="DeactivateEmployee_Click"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Cursor="Hand"
                                    Padding="5"
                                    ToolTip="Desactivar">
                                                    <TextBlock Text="🚫" FontSize="16"/>
                                                </Button>
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>

                    <!-- Total de Nómina -->
                    <Border Grid.Row="2" Background="White" CornerRadius="8" 
        Margin="0,15,0,0" Padding="20,15">
                        <Grid>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <TextBlock Text="TOTAL GASTOS FIJOS:" 
                     FontSize="16" 
                     FontWeight="Bold"
                     Foreground="{StaticResource TextGray}"
                     VerticalAlignment="Center"
                     Margin="0,0,15,0"/>
                                <TextBlock Name="TotalExpensesText"  
                     Text="$0.00" 
                     FontSize="24" 
                     FontWeight="Bold"
                     Foreground="{StaticResource DangerColor}"
                     VerticalAlignment="Center"/>
        </StackPanel>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>

            <!-- Tab de Gastos Fijos -->
            <TabItem Header="GASTOS FIJOS">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Toolbar de Gastos -->
                    <Border Grid.Row="0" Background="White" CornerRadius="8" 
                            Margin="0,10,0,15" Padding="20,15">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" 
                                     Text="Gestión de gastos fijos mensuales" 
                                     FontSize="14" 
                                     Foreground="{StaticResource TextGray}"
                                     VerticalAlignment="Center"/>

                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                <Button Name="AddExpenseButton"
            Click="AddExpenseButton_Click"
            Style="{StaticResource ModernButton}">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="➕ " FontSize="12" Margin="0,0,5,0"/>
                                        <TextBlock Text="Nuevo Gasto"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- DataGrid de Gastos Fijos -->
                    <Border Grid.Row="1" Background="White" CornerRadius="8">
                        <!-- Reemplazar la sección del DataGrid de GASTOS FIJOS -->
                        <DataGrid Name="ExpensesDataGrid"
                                        AutoGenerateColumns="False"
                                        CanUserAddRows="False"
                                        CanUserDeleteRows="False"
                                        GridLinesVisibility="None"
                                        BorderThickness="0"
                                        Background="White"
                                        RowHeight="45"
                                        HeadersVisibility="Column"
                                        SelectionMode="Single"
                                        CellStyle="{StaticResource ModernDataGridCell}"
                                        CellEditEnding="ExpensesDataGrid_CellEditEnding"
                                        PreviewKeyDown="ExpensesDataGrid_PreviewKeyDown">

                            <DataGrid.RowStyle>
                                <Style TargetType="DataGridRow">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsNew}" Value="True">
                                            <Setter Property="Background" Value="#F0FDF4"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding HasChanges}" Value="True">
                                            <Setter Property="Background" Value="#FEF3C7"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </DataGrid.RowStyle>

                            <DataGrid.Columns>
                                <DataGridComboBoxColumn Header="TIPO" 
                               SelectedItemBinding="{Binding ExpenseType}" 
                               Width="150">
                                    <DataGridComboBoxColumn.ElementStyle>
                                        <Style TargetType="ComboBox">
                                            <Setter Property="ItemsSource">
                                                <Setter.Value>
                                                    <x:Array Type="{x:Type sys:String}" 
                                    xmlns:sys="clr-namespace:System;assembly=mscorlib">
                                                        <sys:String>GASOLINA</sys:String>
                                                        <sys:String>SEGURO</sys:String>
                                                        <sys:String>SERVICIOS</sys:String>
                                                        <sys:String>RENTA</sys:String>
                                                        <sys:String>MANTENIMIENTO</sys:String>
                                                        <sys:String>TELEFONO</sys:String>
                                                        <sys:String>INTERNET</sys:String>
                                                        <sys:String>LUZ</sys:String>
                                                        <sys:String>AGUA</sys:String>
                                                        <sys:String>OTROS</sys:String>
                                                    </x:Array>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </DataGridComboBoxColumn.ElementStyle>
                                    <DataGridComboBoxColumn.EditingElementStyle>
                                        <Style TargetType="ComboBox">
                                            <Setter Property="ItemsSource">
                                                <Setter.Value>
                                                    <x:Array Type="{x:Type sys:String}" 
                                    xmlns:sys="clr-namespace:System;assembly=mscorlib">
                                                        <sys:String>GASOLINA</sys:String>
                                                        <sys:String>SEGURO</sys:String>
                                                        <sys:String>SERVICIOS</sys:String>
                                                        <sys:String>RENTA</sys:String>
                                                        <sys:String>MANTENIMIENTO</sys:String>
                                                        <sys:String>TELEFONO</sys:String>
                                                        <sys:String>INTERNET</sys:String>
                                                        <sys:String>LUZ</sys:String>
                                                        <sys:String>AGUA</sys:String>
                                                        <sys:String>OTROS</sys:String>
                                                    </x:Array>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </DataGridComboBoxColumn.EditingElementStyle>
                                </DataGridComboBoxColumn>

                                <DataGridTextColumn Header="DESCRIPCIÓN" 
                          Binding="{Binding Description, UpdateSourceTrigger=PropertyChanged}" 
                          Width="*"/>

                                <DataGridTextColumn Header="MONTO MENSUAL" 
                          Binding="{Binding MonthlyAmount, StringFormat={}{0:C}, UpdateSourceTrigger=PropertyChanged}" 
                          Width="150">
                                    <DataGridTextColumn.ElementStyle>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="FontWeight" Value="SemiBold"/>
                                            <Setter Property="TextAlignment" Value="Right"/>
                                            <Setter Property="Foreground" Value="{StaticResource DarkText}"/>
                                        </Style>
                                    </DataGridTextColumn.ElementStyle>
                                </DataGridTextColumn>

                                <!--Columna de acciones para eliminar-->
                                
                                <DataGridTemplateColumn Header="" Width="50">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button Click="DeleteExpense_Click"
                    Background="Transparent"
                    BorderThickness="0"
                    Cursor="Hand"
                    Padding="5"
                    ToolTip="Eliminar">
                                                <Button.Style>
                                                    <Style TargetType="Button">
                                                        <Setter Property="Visibility" Value="Visible"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding IsNew}" Value="True">
                                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Button.Style>
                                                <TextBlock Text="🗑️" FontSize="14"/>
                                            </Button>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>

                    
                </Grid>
            </TabItem>
        </TabControl>

        <!-- Row 3: Footer -->
        <Border Grid.Row="3" Background="White" BorderThickness="0,1,0,0" 
        BorderBrush="{StaticResource BorderGray}" Padding="30,15">
            <Grid>
                <TextBlock Name="StatusText"
                 Text="" 
                 FontSize="12" 
                 FontWeight="SemiBold"
                 Foreground="{StaticResource SuccessColor}"
                 HorizontalAlignment="Left"/>
        
        <TextBlock Name="LastUpdateText" 
                 Text="Última actualización: 11/09/2024 14:30" 
                 FontSize="12" 
                 Foreground="{StaticResource TextGray}"
                 HorizontalAlignment="Right"/>
    </Grid>
        </Border>
    </Grid>
</Window>
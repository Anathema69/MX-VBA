<UserControl x:Class="SistemaGestionProyectos2.Controls.SessionTimeoutBanner"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="60"
             HorizontalAlignment="Stretch"
             VerticalAlignment="Top">

    <UserControl.Resources>
        <Storyboard x:Key="SlideDown">
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                           From="-60" To="0" Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <Storyboard x:Key="SlideUp">
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                           From="0" To="-60" Duration="0:0:0.2">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseIn"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </UserControl.Resources>

    <Border Name="BannerBorder"
            Background="#FEF3C7"
            BorderBrush="#F59E0B"
            BorderThickness="0,0,0,2"
            RenderTransformOrigin="0.5,0.5">
        <Border.RenderTransform>
            <TranslateTransform Y="-60"/>
        </Border.RenderTransform>

        <Border.Effect>
            <DropShadowEffect BlurRadius="8" Direction="270" ShadowDepth="2" Opacity="0.3" Color="#F59E0B"/>
        </Border.Effect>

        <Grid Margin="20,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Ícono de advertencia -->
            <Border Grid.Column="0"
                    Width="40" Height="40"
                    Background="#F59E0B"
                    CornerRadius="20"
                    Margin="0,0,16,0">
                <TextBlock Text="⚠️"
                         FontSize="24"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"/>
            </Border>

            <!-- Mensaje -->
            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                <TextBlock Text="Sesión inactiva detectada"
                         FontSize="14"
                         FontWeight="SemiBold"
                         Foreground="#92400E"/>
                <TextBlock Name="MessageText"
                         Text="Por tu seguridad, tu sesión se cerrará pronto"
                         FontSize="12"
                         Foreground="#78350F"
                         Margin="0,2,0,0"/>
            </StackPanel>

            <!-- Cuenta regresiva -->
            <Border Grid.Column="2"
                    Background="White"
                    BorderBrush="#F59E0B"
                    BorderThickness="2"
                    CornerRadius="8"
                    Padding="16,8"
                    Margin="0,0,16,0">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="⏱️" FontSize="18" Margin="0,0,8,0" VerticalAlignment="Center"/>
                    <StackPanel>
                        <TextBlock Text="Cierra en:"
                                 FontSize="10"
                                 Foreground="#78350F"
                                 HorizontalAlignment="Center"/>
                        <TextBlock Name="CountdownText"
                                 Text="0:30"
                                 FontSize="20"
                                 FontWeight="Bold"
                                 Foreground="#F59E0B"
                                 HorizontalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Botón Extender -->
            <Button Grid.Column="3"
                    Name="ExtendButton"
                    Content="Extender sesión"
                    Background="#F59E0B"
                    Foreground="White"
                    BorderThickness="0"
                    Padding="20,10"
                    FontWeight="SemiBold"
                    FontSize="13"
                    Cursor="Hand"
                    Margin="0,0,12,0"
                    Click="ExtendButton_Click">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Opacity" Value="0.9"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>

            <!-- Botón cerrar -->
            <Button Grid.Column="4"
                    Name="CloseButton"
                    Content="✕"
                    Background="Transparent"
                    Foreground="#78350F"
                    BorderThickness="0"
                    FontSize="16"
                    FontWeight="Bold"
                    Width="30" Height="30"
                    Cursor="Hand"
                    ToolTip="Cerrar (la sesión se cerrará automáticamente)"
                    Click="CloseButton_Click">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="15">
                            <ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FDE68A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>
        </Grid>
    </Border>
</UserControl>
